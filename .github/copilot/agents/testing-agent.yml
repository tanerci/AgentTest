name: testing-agent
description: >
  Ensures new endpoints have unit and integration tests. Runs test suite on PRs.
pillar: ops-excellence
tags: [testing, unit-tests, integration-tests, coverage, xunit]
version: "1.0"
tasks:
  - type: scaffold-tests
    inputs:
      framework: "xunit"
      source: "Controllers/**/*.cs"
      output: "tests/"
  - type: run-tests
    inputs:
      command: "dotnet test --collect:\"XPlat Code Coverage\""
  - type: coverage-report
    inputs:
      threshold: 80
      output: "tests/coverage"
